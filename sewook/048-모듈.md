# 48장 모듈

## 모듈의 일반적 의미

모듈이란 어플리케이션을 구성하는 개별적 요소로서 재사용 가능한 코드 조각을 말한다.

- 모듈은 기능을 기준으로 파일 단위로 분리한다.
- 자신만의 파일 스코프(모듈 스코프)를 가질 수 있어야 한다.
- 파일 스코프를 갖는 모듈의 모든 자산은 캡슐화되어 어플리케이션과 분리된 개별적 존재로 존재한다.
- 모듈은 개별적으로 존재하지만 import와 export를 통해 어플리케이션이나 다른 모듈에 의해 재사용된다.
- 모듈을 사용하면 코드의 단위를 명확히 분리해 어플리케이션을 구성할 수 있고 재사용성을 통해 개발 효율성과 유지보수성을 높일 수 있다.

<br>

## 자바스크립트와 모듈

과거 자바스크립트는 모듈이 성립하기 위해 필요한 파일 스코프를 지원하지 않아 하나의 전역을 공유했다. 따라서 전역 변수가 중복되는 등 문제가 발생했다.

이후 자바스크립트를 범용적으로 사용하려는 움직임이 생기며 모듈 시스템의 문제를 해결하기 위해 CommonJS와 AMD가 제안되었다.

- CommonJs: 특정한 객체를 내보내는 재사용 가능한 자바스크립트 일부분으로 다른 모듈에서 require로 불러 올 수 있으며 module.export로 내보낼 수 있다.
- AMD: Asynchronous Module Definition의 약자이며 비동기적 모듈 정의라는 뜻이다. 모듈의 의존성을 첫 번째 인자로 가지며 의존성이 로드된 후 콜백 함수를 호출한다.
  - `define(['module1', 'module2'], function(module1, module2) { console.log(module1.hello()); });`

현재 Node.js는 기본적으로 CommonJS 사양을 따르고 있기 때문에 ECMAScript 표준 사양은 아니지만 모듈 시스템을 지원한다. 따라서 Node.js 환경에서는 파일별로 독립적인 파일(모듈) 스코프를 갖는다.

<br>

## ES6 모듈(ESM)

ESM은 ES6에서 추가된 클라이언트 사이드 자바스크립트에서 동작하는 모듈이다.

- script 태그에 type="module" 어트리뷰트 추가를 통해 모듈로서 동작하게 할 수 있다.
- ESM은 독자적인 모듈 스코프를 갖는다. 모듈내의 var 변수는 전역 변수도 아니고 window 객체의 프로퍼티도 아니다.
- export 키워드를 통해 선언한 식별자를 외부에 공개할 수 있다.
- import를 통해 다른 모듈에서 export한 식별자를 로드할 수 있다.
