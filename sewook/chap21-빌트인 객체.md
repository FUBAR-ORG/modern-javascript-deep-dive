# 21장 빌트인 객체

자바스크립트에는 40여개의 표준 빌트인 객체가 있다. `Math`, `Reflect`, `Json`을 제외한 빌트인 객체는 생성자 함수로 호출 해 인스턴스를 생성할 수 있다.

## 래퍼 객체

원시값은 객체가 아니다. 그러나 아래 코드에서 원시값은 객체처럼 동작한다.

```js
const str = 'string';

str.toUpperCase(); // STRING
```

원시값을 객체처럼 접근하면 자바스크립트 엔진은 해당 원시값와 연관된 생성자 함수의 인스턴스를 생성한다. 이 인스턴스가 바로 래퍼 객체이며 래퍼 객체는 생성자 함수의 프로토타입을 상속 받으므로 프로퍼티 접근 및 메서드 호출이 가능하다. 접근이 끝나면 래퍼 객체는 가비지 컬렉션의 대상이 되며 다시 원시 값으로 되돌아간다.

아래 코드의 실행 과정은 다음과 같다.

```js
const num = 10.89749123;
typeof num; // number

// #1
num.toFixed(2); // 10.90

// #2
num.name = 'My Number';

// #3
console.log(num.name); // undefined
```

- `#1`: 숫자 값을 `.` 키워드로 접근하면 그 순간 래퍼 객체인 Number 생성자 함수의 인스턴스가 생성되고 숫자가 래퍼 객체의 [[NumberData]] 내부 슬롯에 할당된다.
- `#2`: 래퍼 객체에 `name` 프로퍼티가 동적으로 생성된다.
- `#3`: `#2`에서 생성된 래퍼 객체는 가비지 컬렉션의 대상이 되어 제거되었고 새로 생성된 래퍼 객체에는 `name` 프로퍼티가 존재하지 않는다.

이것이 문자열, 숫자, 불리언 값 즉 원시값이 있는데도 불구하고 String, Number, Boolean 생성자 함수가 존재하는 이유이다.

## 전역 객체

전역 객체는 코드 실행 전 자바스크립트 엔진에 의해 가장 먼저 생성되는 최상위 객체이다. 전역 객체는 표준 빌트인 객체, 호스트 객체, var로 선언한 함수/변수를 프로퍼티로 가진다.

```js
// 표준 빌트인 객체
window.Array(1, 2, 3); // [1,2,3];

// Web API(호스트 객체)
window
  .fetch('https://jsonplaceholder.typicode.com/posts/1')
  .then((response) => response.json())
  .then((json) => console.log(json));
// { id:1, ... }

// var 키워드로 선언한 변수
var value = 10;
window.value; // 10, let이나 const로 선언한 변수의 경우 undefined
```

### 빌트인 전역 프로퍼티

전역 객체를 생략하고 사용할 수 있는 전역 객체의 프로퍼티이다.

- Inifnity: 무한대를 나타내는 숫자 값 Infinity를 가진다.
- NaN
- undefined

### 빌트인 전역 함수

전역에서 호출할 수 있는 전역 객체의 메서드이다.

```js
const num = 100;

function func() {
  // eval 함수는 새로운 num 변수를 선언하면서 이미 존재하는 func 함수의 스코프에 num 변수를 동적으로 추가한다.
  eval('var num = 0');
  console.log(num); // 0
}

func();
console.log(num); // 100
```

- eval
  - 코드를 나타내는 문자열을 인수로 받아 실행한다.
  - 전달된 문자열 코드는 이미 그 위치에 존재하던 코드처럼 동작해 런타임에 동적으로 스코프를 수정한다.
  - 사용자 입력받은 코드 실행은 보안에 취약하고 최적화하고 수행되지않으며 실행 속도가 느리기 때문에 eval 함수 사용은 금지해야한다.
- isInfinite
- isNaN
- parseFloat
- encodeURI, decodeURI : URL의 상위 개념인 URI를 인수로 전달받아 한글, 공백, 특수문자등을 시스템이 처리할 수 있게 이스케이프 처리하는 함수이다.

<br>

## Summary

- 래퍼 객체란 문자열, 숫자, 불리언 값 즉, 원시값을 객체처럼 접근하면 생성되는 임시 객체이다.
- 전역 객체란 자바스크립트 엔진이 코드 실행 전 가장 먼저 생성하는 최상위 객체이다.
- eval 함수는 안전성, 최적화, 실행속도 등에 문제가 있으므로 사용해선 안된다.
